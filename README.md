# ğŸ· JazzMate

ì¬ì¦ˆ ìŒì•… ê°ìƒë¬¸ ì‘ì„± ë° AI ê¸°ë°˜ ë§ì¶¤í˜• ìŒì•… ì¶”ì²œ í”Œë«í¼

## ğŸ“– í”„ë¡œì íŠ¸ ì†Œê°œ

JazzmateShopì€ ì¬ì¦ˆ ì…ë¬¸ìë“¤ì„ ìœ„í•œ ì¢…í•© í”Œë«í¼ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¢‹ì•„í•˜ëŠ” ì¬ì¦ˆ ê³¡ì— ëŒ€í•œ ê°ìƒë¬¸ì„ ì‘ì„±í•˜ê³ , AI ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ê°œì¸ì˜ ì·¨í–¥ê³¼ ê°ìƒ íŒ¨í„´ì„ ë¶„ì„í•´ ë§ì¶¤í˜• ìŒì•…ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ë²¡í„° ì„ë² ë”©ê³¼ ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸ì„ ê²°í•©í•˜ì—¬ ì˜ë¯¸ ê¸°ë°˜ ìŒì•… ì¶”ì²œ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ê°ìƒë¬¸ ì‘ì„± ë° ê´€ë¦¬
- ìƒì„¸í•œ ì¬ì¦ˆ ê³¡ ê°ìƒë¬¸ ì‘ì„± (íŠ¸ë™ëª…, ì•„í‹°ìŠ¤íŠ¸, ê°ìƒ ë‚´ìš© ë“±)
- ì¥ë¥´, ë¬´ë“œ, ì—ë„ˆì§€ ë ˆë²¨, BPM, ë³´ì»¬ ìŠ¤íƒ€ì¼ ë“± ë©”íƒ€ë°ì´í„° ê¸°ë¡
- ì‘ì„±í•œ ê°ìƒë¬¸ ëª©ë¡ ì¡°íšŒ ë° ê´€ë¦¬
- ê³µê°œ/ë¹„ê³µê°œ ì„¤ì • ê¸°ëŠ¥

### 2. AI ê¸°ë°˜ ë§ì¶¤í˜• ì¶”ì²œ
- **ë²¡í„° ì„ë² ë”© ê¸°ë°˜ ìœ ì‚¬ë„ ê²€ìƒ‰**: ê°ìƒë¬¸ í…ìŠ¤íŠ¸ë¥¼ ì„ë² ë”©ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ìœ ì‚¬í•œ ê³¡ ê²€ìƒ‰
- **LLM ê¸°ë°˜ ì¶”ì²œ ì‚¬ìœ  ìƒì„±**: GPT-3.5ë¥¼ í™œìš©í•˜ì—¬ ê° ì¶”ì²œ ê³¡ì— ëŒ€í•œ ìƒì„¸í•œ ì¶”ì²œ ì´ìœ  ì œê³µ
- **ì‹¤ì‹œê°„ ì¶”ì²œ**: ê°ìƒë¬¸ ì‘ì„± ì§í›„ ë¹„ë™ê¸°ë¡œ ì¶”ì²œ ìƒì„±
- **ì¶”ì²œ ì •í™•ë„ í–¥ìƒ**: í‰ë¡ ê°€ ë¦¬ë·° ë°ì´í„°ë¥¼ í™œìš©í•œ ê³ í’ˆì§ˆ ë²¡í„° DB êµ¬ì¶•

### 3. í‰ë¡ ê°€ ë¦¬ë·° ì¡°íšŒ
- ì „ë¬¸ í‰ë¡ ê°€ë“¤ì˜ ìµœì‹  ì•¨ë²” ë¦¬ë·° í™•ì¸
- í´ë˜ì‹ ì¬í•´ì„ë¶€í„° ìƒˆë¡œìš´ ë°œê²¬ê¹Œì§€ ë‹¤ì–‘í•œ ì‹œê° ì œê³µ

### 4. ë°ì´í„° í’ˆì§ˆ ëª¨ë‹ˆí„°ë§
- ë°ì´í„°ë² ì´ìŠ¤ ë‚´ ë°ì´í„° í’ˆì§ˆ í˜„í™© ì‹œê°í™”
- íˆíŠ¸ë§µ ë° ì‹œê³„ì—´ ê·¸ë˜í”„ë¥¼ í†µí•œ ë°ì´í„° í’ˆì§ˆ íŠ¸ë Œë“œ ë¶„ì„

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React 18** - ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ êµ¬ì¶•
- **TypeScript** - íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- **Vite** - ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° ë¹Œë“œ ë„êµ¬
- **Tailwind CSS** - ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§
- **shadcn/ui** - ê³ í’ˆì§ˆ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **React Router** - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…
- **ApexCharts** - ë°ì´í„° ì‹œê°í™”

### Backend
- **Spring Boot 3.5.7** - RESTful API ì„œë²„
- **Java 17** - ë°±ì—”ë“œ ì–¸ì–´
- **JPA/Hibernate** - ORM í”„ë ˆì„ì›Œí¬
- **PostgreSQL (Supabase)** - ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤

### AI Service
- **Python 3** - AI ì„œë¹„ìŠ¤ êµ¬í˜„
- **FastAPI** - ê³ ì„±ëŠ¥ ë¹„ë™ê¸° API í”„ë ˆì„ì›Œí¬
- **Qdrant** - ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **Hugging Face** - ì„ë² ë”© ëª¨ë¸ (`multilingual-e5-large`)
- **OpenAI GPT-3.5-turbo** - ì¶”ì²œ ì‚¬ìœ  ìƒì„±

### DevOps & Infrastructure
- **Docker** - ì»¨í…Œì´ë„ˆí™”
- **Docker Compose** - ë©€í‹° ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë¦¬
- **Nginx** - ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° ë¡œë“œ ë°¸ëŸ°ì‹±

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚  React + TypeScript + Vite
â”‚   (Nginx)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚                  â”‚
       â–¼              â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend   â”‚  â”‚  AI Service  â”‚  â”‚  AI Service  â”‚
â”‚  (REST API) â”‚  â”‚  (FastAPI)    â”‚  â”‚  (FastAPI)   â”‚
â”‚Spring Boot  â”‚  â”‚  (ì§ì ‘ í˜¸ì¶œ)   â”‚  â”‚ (ë°±ì—”ë“œ ê²½ìœ )   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚                  â”‚
       â”‚               â”‚                  â”‚
       â–¼               â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                  â”‚
â”‚Supabase  â”‚          â”‚                  â”‚
â”‚PostgreSQLâ”‚          â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                  â”‚
                       â”‚                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚              â”‚                  â”‚
        â–¼              â–¼                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Hugging   â”‚  â”‚  Qdrant  â”‚      â”‚ OpenAI   â”‚
   â”‚Face API  â”‚  â”‚Vector DB â”‚      â”‚ GPT API  â”‚
   â”‚(ì™¸ë¶€ API) â”‚  â”‚(ì™¸ë¶€ í´ë¼ìš°ë“œ)â”‚      â”‚(ì™¸ë¶€ API)â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

#### 1. ê°ìƒë¬¸ ì‘ì„± ë° ìë™ ì¶”ì²œ ìƒì„± í”Œë¡œìš°
1. **ê°ìƒë¬¸ ì‘ì„±**: ì‚¬ìš©ìê°€ ê°ìƒë¬¸ì„ ì‘ì„±í•˜ë©´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œë¡œ ì „ì†¡
2. **ê°ìƒë¬¸ ì €ì¥**: Spring Boot ë°±ì—”ë“œê°€ Supabase PostgreSQLì— ê°ìƒë¬¸ ì €ì¥ (ë™ê¸° ì²˜ë¦¬)
3. **ì¶”ì²œ ìš”ì²­**: ë°±ì—”ë“œê°€ ë¹„ë™ê¸°ë¡œ AI ì„œë¹„ìŠ¤(FastAPI)ì— ì¶”ì²œ ìš”ì²­ ì „ì†¡
4. **ì„ë² ë”© ìƒì„±**: AI ì„œë¹„ìŠ¤ê°€ Hugging Face APIë¥¼ í†µí•´ ê°ìƒë¬¸ í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜
5. **ë²¡í„° ê²€ìƒ‰**: AI ì„œë¹„ìŠ¤ê°€ Qdrant í´ë¼ìš°ë“œ APIë¥¼ í†µí•´ ìœ ì‚¬ë„ê°€ ë†’ì€ ê³¡ ê²€ìƒ‰
6. **ì¶”ì²œ ì‚¬ìœ  ìƒì„±**: AI ì„œë¹„ìŠ¤ê°€ OpenAI GPT APIë¥¼ í†µí•´ ê° ì¶”ì²œ ê³¡ì— ëŒ€í•œ ì¶”ì²œ ì‚¬ìœ  ìƒì„±
7. **ê²°ê³¼ ì €ì¥**: AI ì„œë¹„ìŠ¤ê°€ ë°±ì—”ë“œ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì¶”ì²œ ê²°ê³¼ë¥¼ Supabase PostgreSQLì— ì €ì¥

**ì°¸ê³ **: ì´ í”Œë¡œìš°ì—ì„œ ì¶”ì²œ ìƒì„±ì´ ì‹¤íŒ¨í•˜ê±°ë‚˜ ëˆ„ë½ëœ ê²½ìš°, ì‚¬ìš©ìëŠ” ë‹¤ìŒ í”Œë¡œìš°ë¥¼ í†µí•´ ìˆ˜ë™ìœ¼ë¡œ ì¶”ì²œì„ ë‹¤ì‹œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 2. ë°ì´í„° í’ˆì§ˆ ì¡°íšŒ í”Œë¡œìš° (í”„ë¡ íŠ¸ì—”ë“œ â†’ FastAPI ì§ì ‘ í˜¸ì¶œ)
1. **ë°ì´í„° í’ˆì§ˆ ìš”ì²­**: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ FastAPI(`/ai-api/admin/data-quality`)ë¡œ ì§ì ‘ ìš”ì²­
2. **ë°ì´í„° ë¶„ì„**: AI ì„œë¹„ìŠ¤ê°€ Supabase PostgreSQLì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  í’ˆì§ˆì„ ë¶„ì„
3. **ê²°ê³¼ ë°˜í™˜**: ë°ì´í„° í’ˆì§ˆ í˜„í™©(ì™„ì„±ë„, ì‹œê³„ì—´ íŠ¸ë Œë“œ ë“±)ì„ JSON í˜•íƒœë¡œ ë°˜í™˜

**ì°¸ê³ **: QdrantëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¡œ, AI ì„œë¹„ìŠ¤ ë‚´ë¶€ì—ì„œ QdrantClientë¥¼ í†µí•´ ì§ì ‘ APIë¡œ ì—°ê²°ë©ë‹ˆë‹¤. ë³„ë„ì˜ ë¡œì»¬ ì„œë¹„ìŠ¤ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì•„ë‹™ë‹ˆë‹¤.

## ğŸ”‘ ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

### 1. ê°ìƒë¬¸ ê¸°ë°˜ ì¶”ì²œ ì‹œìŠ¤í…œ

ì‚¬ìš©ìê°€ ì‘ì„±í•œ ê°ìƒë¬¸ì˜ ì˜ë¯¸ë¥¼ ë²¡í„° ì„ë² ë”©ìœ¼ë¡œ ë³€í™˜í•˜ê³ , Qdrant ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìœ ì‚¬ë„ê°€ ë†’ì€ ê³¡ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤. ê° ì¶”ì²œ ê³¡ì— ëŒ€í•´ì„œëŠ” GPT-3.5ë¥¼ í™œìš©í•˜ì—¬ ê°œì¸í™”ëœ ì¶”ì²œ ì‚¬ìœ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**í•µì‹¬ ì•Œê³ ë¦¬ì¦˜:**
- í…ìŠ¤íŠ¸ ì„ë² ë”©: `multilingual-e5-large` ëª¨ë¸ ì‚¬ìš©
- ìœ ì‚¬ë„ ì¸¡ì •: Cosine Similarity
- ì¶”ì²œ ì‚¬ìœ  ìƒì„±: GPT-3.5-turboë¥¼ í™œìš©í•œ ìì—°ì–´ ìƒì„±

<details>
<summary>ğŸ“ ì£¼ìš” ì½”ë“œ ë³´ê¸°</summary>

**ê°ìƒë¬¸ ê¸°ë°˜ ì¶”ì²œ ì‹¤í–‰ (recommend_by_review.py)**

```python
async def recommend_by_review(review_text: str, review_id: int = None, limit: int = 10):
    """ê°ìƒë¬¸ í…ìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³¡ì„ ì¶”ì²œ"""
    try:
        # Qdrant ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
        qdrant_service = QdrantService()
        await qdrant_service.initialize()
        
        # ê°ìƒë¬¸ ê¸°ë°˜ ì¶”ì²œ ì‹¤í–‰
        recommendations = await qdrant_service.recommend_tracks_by_content(
            artist="",
            metadata={},
            content=review_text,
            review_summary="",
            lyrics="",
            limit=limit
        )
        
        # ì¶”ì²œì‚¬ìœ  ìƒì„±
        reason_service = RecommendationReasonService()
        recommendations_with_reasons = []
        
        for rec in recommendations:
            try:
                # LLMì„ ì‚¬ìš©í•œ ì¶”ì²œì‚¬ìœ  ìƒì„±
                payload = rec.get("payload", {})
                
                reason = reason_service.generate_recommendation_reason_with_llm(
                    user_review=review_text,
                    recommended_track=payload
                )
                
                # ì¶”ì²œì‚¬ìœ ë¥¼ í¬í•¨í•œ ìƒˆë¡œìš´ ì¶”ì²œ ê²°ê³¼ ìƒì„±
                rec_with_reason = rec.copy()
                rec_with_reason["reason"] = reason
                recommendations_with_reasons.append(rec_with_reason)
                
            except Exception as e:
                print(f"âš ï¸ ì¶”ì²œì‚¬ìœ  ìƒì„± ì‹¤íŒ¨: {e}")
                # ì¶”ì²œì‚¬ìœ  ìƒì„± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ë©”ì‹œì§€ ì‚¬ìš©
                rec_with_reason = rec.copy()
                rec_with_reason["reason"] = f"ê°ìƒë¬¸ê³¼ ìœ ì‚¬í•œ ìŠ¤íƒ€ì¼ì˜ ê³¡ì…ë‹ˆë‹¤. (ìœ ì‚¬ë„: {rec.get('score', 0.0)*100:.1f}%)"
                recommendations_with_reasons.append(rec_with_reason)
        
        # review_idê°€ ì œê³µë˜ë©´ DBì— ì €ì¥
        if review_id:
            save_recommendations_to_db(review_id, recommendations_with_reasons, review_text)
        
        # ê²°ê³¼ë¥¼ JSON í˜•íƒœë¡œ ë°˜í™˜
        result = {
            "success": True,
            "recommendations": recommendations_with_reasons,
            "count": len(recommendations_with_reasons)
        }
        
        await qdrant_service.disconnect()
```

**ì„ë² ë”© ìƒì„± (embedding_service.py)**

```python
    async def get_embedding(self, track_data: Dict[str, Any]) -> Optional[List[float]]:
        """ë‹¨ì¼ ì„ë² ë”© ìƒì„±"""
        if not self.client:
            error_msg = "HF_TOKENì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
            print(f"âŒ {error_msg}")
            self._save_failed_data(track_data, error_msg)
            return None
            
        try:
            import requests
            
            text = self._create_text(track_data)
            
            # E5 ëª¨ë¸ì€ íŠ¹ë³„í•œ í”„ë¡¬í”„íŠ¸ í˜•ì‹ í•„ìš”
            if not text.startswith("query: ") and not text.startswith("passage: "):
                text = f"query: {text}"
            
            # ì§ì ‘ API í˜¸ì¶œ ì‹œë„
            api_key = os.getenv('HF_TOKEN')
            headers = {"Authorization": f"Bearer {api_key}"}
            
            # Inference API ì—”ë“œí¬ì¸íŠ¸
            api_url = "https://api-inference.huggingface.co/models/intfloat/multilingual-e5-large"
            
            response = requests.post(
                api_url,
                headers=headers,
                json={"inputs": text},
                timeout=30
            )
            
            response.raise_for_status()
            result = response.json()
            
            # ê²°ê³¼ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°
            if isinstance(result, list):
                # E5 ëª¨ë¸ì€ ë³´í†µ ì²« ë²ˆì§¸ ìš”ì†Œê°€ ì„ë² ë”© ë²¡í„°
                if len(result) > 0 and isinstance(result[0], list):
                    return result[0]
                return result
            
            return result
        
            
        except Exception as e:
            error_msg = f"ì„ë² ë”© ìƒì„± ì‹¤íŒ¨: {str(e)}"
            print(f"âŒ {error_msg}")
            # ì„ë² ë”© ì—†ì´ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ
            return None
```

**ë²¡í„° ê²€ìƒ‰ (qdrant_service.py)**

```python
        # Qdrantì—ì„œ ìœ ì‚¬í•œ ë²¡í„° ê²€ìƒ‰
        search_results = self.client.search(
            collection_name=self.collection_name,
            query_vector=query_embedding,
            query_filter=query_filter,
            limit=limit,
            with_payload=True,
            with_vectors=False
        )
        
        # ê²°ê³¼ í¬ë§·íŒ…
        recommendations = []
        for result in search_results:
            recommendations.append({
                "id": result.id,
                "score": result.score,
                "payload": result.payload
            })
        
        if recommendations:
            print(f"   ìµœê³  ìœ ì‚¬ë„: {recommendations[0].get('score', 0):.4f}")
        
        return recommendations
        
    except Exception as e:
        print(f"âŒ ì¶”ì²œ ê²€ìƒ‰ ì‹¤íŒ¨: {e}")
        import traceback
        traceback.print_exc()
        return []
```

</details>

### 2. ë¹„ë™ê¸° ì²˜ë¦¬

ê°ìƒë¬¸ ì €ì¥ê³¼ ì¶”ì²œ ìƒì„±ì„ ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš©ì ì‘ë‹µ ì‹œê°„ì„ ìµœì†Œí™”í–ˆìŠµë‹ˆë‹¤. ì¶”ì²œ ìƒì„±ì€ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ë©°, ì‹¤íŒ¨í•˜ë”ë¼ë„ ê°ìƒë¬¸ ì €ì¥ì€ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

<details>
<summary>ğŸ“ ì£¼ìš” ì½”ë“œ ë³´ê¸°</summary>

**ê°ìƒë¬¸ ì €ì¥ ë° ë¹„ë™ê¸° ì¶”ì²œ ìš”ì²­ (UserReviewService.java)**

```java
    public UserReviewResponse createUserReview(UserReviewRequest request) {
        try {
            
            UserReview userReview = UserReview.builder()
                .albumId(request.getAlbumId())
                .userId(request.getUserId())
                .trackName(request.getTrackName())
                .artistName(request.getArtistName())
                .reviewContent(request.getReviewContent())
                .rating(request.getRating())
                .mood(request.getMood())
                .genre(request.getGenre())
                .energyLevel(request.getEnergyLevel())
                .bpm(request.getBpm())
                .vocalStyle(request.getVocalStyle())
                .instrumentation(request.getInstrumentation())
                .tags(request.getTags())
                .isPublic(request.getIsPublic())
                .isFeatured(false)
                .likeCount(0)
                .commentCount(0)
                .createdAt(LocalDateTime.now())
                .updatedAt(LocalDateTime.now())
                .build();
            
            UserReview savedReview = userReviewRepository.save(userReview);
            
            return convertToResponse(savedReview);
            
        } catch (Exception e) {
            log.error("ê°ìƒë¬¸ ìƒì„± ì˜¤ë¥˜: ", e);
            throw new RuntimeException("ê°ìƒë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage());
        }
    }
```

**ë¹„ë™ê¸° ì¶”ì²œ ìƒì„± (UserReviewService.java)**

```java
    public void generateRecommendationsForReview(Integer reviewId, String reviewText) {
        try {
            // HTTP í´ë¼ì´ì–¸íŠ¸ ìƒì„±
            HttpClient client = HttpClient.newBuilder()
                .connectTimeout(Duration.ofSeconds(30))
                .build();
            
            // ìš”ì²­ ë°ì´í„° ìƒì„±
            ObjectMapper objectMapper = new ObjectMapper();
            Map<String, Object> requestData = new HashMap<>();
            requestData.put("review_text", reviewText);
            requestData.put("review_id", reviewId);
            requestData.put("limit", 3);
            
            String requestBody = objectMapper.writeValueAsString(requestData);
            
            // HTTP ìš”ì²­ ìƒì„±
            HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(aiServiceUrl + "/recommend/by-review"))
                .header("Content-Type", "application/json")
                .POST(HttpRequest.BodyPublishers.ofString(requestBody))
                .timeout(Duration.ofSeconds(60))
                .build();
            
            // ìš”ì²­ ì „ì†¡
            HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
            
            if (response.statusCode() == 200) {
                log.info("ì¶”ì²œ ìƒì„± ì™„ë£Œ: review_id={}", reviewId);
                log.info("FastAPI ì‘ë‹µ: {}", response.body());
            } else {
                log.error("ì¶”ì²œ ìƒì„± ì‹¤íŒ¨: review_id={}, statusCode={}, response={}", 
                    reviewId, response.statusCode(), response.body());
            }
            
        } catch (Exception e) {
            log.error("ì¶”ì²œ ìƒì„± ì˜¤ë¥˜: review_id={}, error={}", reviewId, e.getMessage());
        }
```

</details>

### 3. ë°ì´í„° í’ˆì§ˆ ê´€ë¦¬

ë°ì´í„°ë² ì´ìŠ¤ ë‚´ ë°ì´í„° í’ˆì§ˆì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì‹œê°í™”í•˜ì—¬ ë°ì´í„°ì˜ ì‹ ë¢°ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.

<details>
<summary>ğŸ“ ì£¼ìš” ì½”ë“œ ë³´ê¸°</summary>

**ë°ì´í„° í’ˆì§ˆ ì¡°íšŒ API (api_server.py)**

```python
@app.get("/admin/data-quality")
async def get_data_quality():
    """ë°ì´í„° í’ˆì§ˆ íˆìŠ¤í† ë¦¬ ë° í˜„ì¬ ìƒíƒœ ì¡°íšŒ"""
    try:
        csv_file = '/app/data_quality_history.csv'
        
        # CSV íŒŒì¼ì´ ì—†ìœ¼ë©´ ë¹ˆ ì‘ë‹µ
        if not os.path.exists(csv_file):
            return {
                "success": False,
                "message": "ë°ì´í„° í’ˆì§ˆ íˆìŠ¤í† ë¦¬ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.",
                "data": None
            }
        
        # CSV íŒŒì¼ ì½ê¸°
        df = pd.read_csv(csv_file)
        
        # datetimeìœ¼ë¡œ ë³€í™˜
        df['datetime'] = pd.to_datetime(df['timestamp'])
        df = df.sort_values('datetime')
        
        # ìµœì‹  ë¶„ì„ ê²°ê³¼ (ë§ˆì§€ë§‰ í–‰)
        latest_row = df.iloc[-1]
        
        # ì „ì²´ ì‹œê³„ì—´ ë°ì´í„° ì¶”ì¶œ
        timeseries_data = {
            "dates": df['datetime'].dt.strftime('%Y-%m-%d %H:%M').tolist(),
            "overall_quality": df['overall_quality'].tolist(),
            "total_records": df['total_records'].tolist(),
            "total_fields": df['total_fields'].tolist() if 'total_fields' in df.columns else []
        }
        
        # í•„ë“œë³„ ì™„ì„±ë„ ë°ì´í„° ì¶”ì¶œ
        completeness_fields = [col for col in df.columns if col.endswith('_completeness')]
        field_completeness = {}
        
        for col in completeness_fields:
            field_name = col.replace('_completeness', '')
            # ë©”íƒ€ë°ì´í„° í•„ë“œ ì œì™¸
            if field_name not in ['date', 'timestamp']:
                field_completeness[field_name] = {
                    "history": df[col].tolist(),
                    "latest": float(latest_row[col]),
                    "missing_pct": float(latest_row.get(f'{field_name}_missing_pct', 0))
                }
        
        # ìµœì‹  ë¶„ì„ ê²°ê³¼ ìš”ì•½
        latest_summary = {
            "date": latest_row['date'],
            "timestamp": latest_row['timestamp'],
            "overall_quality": float(latest_row['overall_quality']),
            "total_records": int(latest_row['total_records']),
            "total_fields": int(latest_row.get('total_fields', 0)),
            "field_completeness": {field: data["latest"] for field, data in field_completeness.items()}
        }
        
        return {
            "success": True,
            "data": {
                "latest": latest_summary,
                "timeseries": timeseries_data,
                "field_completeness": field_completeness
            }
        }
        
    except Exception as e:
        print(f"âŒ ë°ì´í„° í’ˆì§ˆ ì¡°íšŒ ì˜¤ë¥˜: {str(e)}")
        import traceback
        traceback.print_exc()
        return {
            "success": False,
            "error": str(e),
            "data": None
        }
```

</details>

## ğŸ“Š ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### Backend (Spring Boot)
- `POST /api/user-reviews` - ê°ìƒë¬¸ ì‘ì„±
- `GET /api/user-reviews` - ê°ìƒë¬¸ ëª©ë¡ ì¡°íšŒ
- `GET /api/user-reviews/{id}` - íŠ¹ì • ê°ìƒë¬¸ ì¡°íšŒ
- `POST /api/tracks` - íŠ¸ë™ ì •ë³´ ì €ì¥/ì¡°íšŒ
- `POST /api/recommend-tracks` - ì¶”ì²œ íŠ¸ë™ ì €ì¥
- `GET /api/albums/search` - ì•¨ë²” ê²€ìƒ‰

### AI Service (FastAPI)
- `POST /recommend/by-review` - ê°ìƒë¬¸ ê¸°ë°˜ ì¶”ì²œ ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œ ì§ì ‘ í˜¸ì¶œ ë˜ëŠ” ë°±ì—”ë“œ ê²½ìœ )
- `GET /admin/data-quality` - ë°ì´í„° í’ˆì§ˆ í˜„í™© ì¡°íšŒ (í”„ë¡ íŠ¸ì—”ë“œ ì§ì ‘ í˜¸ì¶œ)
- `POST /build-vector-db` - ë²¡í„° DB êµ¬ì¶•

**ì°¸ê³ **: ì¼ë¶€ AI ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ëŠ” í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Nginx í”„ë¡ì‹œ(`/ai-api`)ë¥¼ í†µí•´ ì§ì ‘ í˜¸ì¶œí•˜ë©°, ë‚˜ë¨¸ì§€ëŠ” Spring Boot ë°±ì—”ë“œë¥¼ ê²½ìœ í•©ë‹ˆë‹¤.

## ğŸ¯ í–¥í›„ ê°œì„  ê³„íš

### 1. ì¶”ì²œ ì •í™•ë„ í–¥ìƒ
- **ê³¡ ë©”íƒ€ë°ì´í„° ë³´ê°•**: í˜„ì¬ ë°ì´í„°ì…‹ì˜ ê³¡ ë©”íƒ€ë°ì´í„°(ì¥ë¥´, ë¬´ë“œ, BPM, ë³´ì»¬ ìŠ¤íƒ€ì¼ ë“±)ë¥¼ ë”ìš± ìƒì„¸í•˜ê³  ì •í™•í•˜ê²Œ ìˆ˜ì§‘ ë° ë³´ê°•
- **ë‹¤ì–‘í•œ ë©”íƒ€ë°ì´í„° ì†ŒìŠ¤ í†µí•©**: ìŒì•… í”Œë«í¼ API, ìŒì•… ë°ì´í„°ë² ì´ìŠ¤ ë“± ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘
- **ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ**: ë²¡í„° ìœ ì‚¬ë„ì™€ ë©”íƒ€ë°ì´í„° í•„í„°ë§ì„ ê²°í•©í•œ í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì‹œìŠ¤í…œ êµ¬í˜„

### 2. ë°ì´í„° í’ˆì§ˆ í–¥ìƒ
- **ë°ì´í„° ê²€ì¦ ë¡œì§ ê°•í™”**: ì…ë ¥ ë°ì´í„°ì˜ í’ˆì§ˆì„ ê²€ì¦í•˜ëŠ” ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ êµ¬ì¶•
- **ë°ì´í„° í´ë¦¬ë‹ íŒŒì´í”„ë¼ì¸**: ì¤‘ë³µ ë°ì´í„° ì œê±°, ëˆ„ë½ëœ í•„ë“œ ë³´ì™„ ë“±ì˜ ë°ì´í„° í´ë¦¬ë‹ ìë™í™”
- **ì‹¤ì‹œê°„ ë°ì´í„° í’ˆì§ˆ ëª¨ë‹ˆí„°ë§**: ë°ì´í„° í’ˆì§ˆ ì§€í‘œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ê³  ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•
- **ë°ì´í„° ì¦ê°•**: ì™¸ë¶€ ì†ŒìŠ¤ì™€ì˜ ë§¤ì¹­ì„ í†µí•œ ë°ì´í„° ë³´ê°•

### 3. ì‹œìŠ¤í…œ ì„±ëŠ¥ ìµœì í™”
- ì¶”ì²œ ì‹œìŠ¤í…œ ì‘ë‹µ ì‹œê°„ ê°œì„ 
- ë²¡í„° ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™”
- ìºì‹± ì „ëµ ë„ì…

### 4. ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- ê°œì¸í™”ëœ ëŒ€ì‹œë³´ë“œ
- ì¶”ì²œ ê²°ê³¼ì— ëŒ€í•œ ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ë° í•™ìŠµ
- ê°ìƒë¬¸ ì‘ì„± ì‹œ ìë™ ì™„ì„± ê¸°ëŠ¥


## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Docker & Docker Compose

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

#### ê°œë°œ í™˜ê²½
`backend/.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì„¤ì •í•©ë‹ˆë‹¤:

```env
# í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
VITE_API_URL=http://localhost:8080

# ìë°” ë°±ì—”ë“œ ì„¤ì •
AI_SERVICE_URL=http://ai-api:8000

# AI ì„œë¹„ìŠ¤ ì„¤ì •
ALLOWED_ORIGINS=http://localhost:3001,http://localhost:3000

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (Supabase)
SPRING_DATASOURCE_URL=jdbc:postgresql://your-supabase-host:5432/your-database
SPRING_DATASOURCE_USERNAME=your-username
SPRING_DATASOURCE_PASSWORD=your-password

# Hugging Face API
HF_TOKEN=your-hugging-face-token

# Qdrant ì„¤ì •
QDRANT_URL=https://your-qdrant-host:6333
QDRANT_API_KEY=your-qdrant-api-key

# OpenAI API
OPENAI_API_KEY=your-openai-api-key
```

#### ìš´ì˜ í™˜ê²½
`env.production.example` íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ìš´ì˜ í™˜ê²½ ì„¤ì • íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

### Docker Composeë¥¼ ì´ìš©í•œ ì‹¤í–‰

#### ê°œë°œ í™˜ê²½
```bash
# ì „ì²´ ì„œë¹„ìŠ¤ ì‹¤í–‰
docker-compose up -d

# íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ì‹¤í–‰
docker-compose up -d java-backend
docker-compose up -d ai-api
docker-compose up -d frontend
```

#### ìš´ì˜ í™˜ê²½
```bash
docker-compose -f docker-compose.prod.yml up -d
```

### ë¡œì»¬ ê°œë°œ í™˜ê²½ ì‹¤í–‰

#### Frontend
```bash
cd frontend
npm install
npm run dev
```

#### Backend (Spring Boot)
```bash
cd backend
./gradlew bootRun
```

#### AI Service
```bash
cd backend/ai-service
pip install -r requirements.txt
python api_server.py
```
